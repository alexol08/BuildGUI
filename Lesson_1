import pygame
import random
import math
pygame.init()

width=500
height=500

window=pygame.display.set_mode((width,height))
pygame.display.set_caption("Asteroid game")
clock=pygame.time.clock(30)

bg = pygame.image.load("L1.py\Images\starbg.png")
alien=pygame.image.load("L1.py/Images/alienShip.png")
rocket=pygame.image.load("L1.py/Images/spaceRocket.png")
star=pygame.image.load("L1.py\Images\star.png")
asteroid50=pygame.image.load("L1.py/Images/asteroid50.png")
asteroid100=pygame.image.load("L1.py/Images/asteroid100.png")
asteroid150=pygame.image.load("L1.py/Images/asteroid150.png")

big_bang=pygame.mixer.sound("L1.py/Sounds/bangLarge.wav")
small_bang=pygame.mixer.sound("L1.py/Sounds/bangSmall.wav")
shoot=pygame.mixer.sound("L1.py\Sounds\shoot.wav")

game_over=False
lives=3
score=0
rapid_fire=False
Sound_on=True
Start_rapid=-1
High_score=0

class Player(object):
    def __init__(self):
        self.img=rocket
        self.width=self.img.get_width()
        self.height=self.img.get_height()
        self.x=width//2
        self.y=height//2
        self.angle=0
        self.rotate_ship=pygame.transform.rotate(self.img, self.angle)
        self.rotate_rect=self.rotate_ship.get_rect()
        self.rotate_rect.center=(self.x, self.y)
        self.cosine=math.cos(math.radians(self.angle + 90))
        self.sine=math.sin(math.radians(self.angle +90))
        self.head=(self.x + self.cosine*self.width//2, self.y - self.sine*self.height//2)
    
    def draw(self, window):
        window.blit(self.rotate_ship, self.rotate_rect)
    def turn_left(self):
        self.angle+=5
        self.update_rotation()
    def turn_right(self):
        self.angle -=5
        self.update_rotation()
    def move_forward(self):
        self.x +=self.cosine*6
        self.y -=self.sine*6
        self.update_rotation()
    def update_rotation(self):
        self.rotate_ship=pygame.transform.rotate(self.img, self.angle)
        self.rotate_rect=self.rotate_ship.get_rect()
        self.rotate_rect.center=(self.x, self.y)
        self.cosine=math.cos(math.radians(self.angle + 90))
        self.sine=math.sin(math.radians(self.angle +90))
        self.bullet=(self.x + self.cosine*self.width//2, self.y - self.sine*self.height//2)
    def update_loc(self):
        if self.x>width+50:
            self.x=0
        elif self.x<0-self.width:
            self.x=width
        elif self.y<-50:
            self.y=height
        elif self.y>height + 50:
            self.y=0

class Bullet(object):
    def __init__(self):
        self.point= Player.head
        self.x, self.y=self.point
        self.width=4
        self.height=4
        self.c=Player.cosine
        self.s=Player.sine
        self.xv=self.c*10
        self.yv=self.s*10

    def move(self):
        self.x += self.xv
        self.y -=self.yv

    def draw(self, window):
        pygame.draw.rect(window, (255, 255, 255), [self.x, self.y, self.width, self.height])

    def checkOffScreen(self):
        if self.x < -50 or self.x > width or self.y > height or self.y< -50:
            return True
        
class Asteroid(object):
    def __init__(self, rank):
        self.rank = rank
        if self.rank == 1:
            self.image = asteroid50
        elif self.rank ==2:
            self.image=asteroid100
        else:
            self.image=asteroid150
        self.width=50*rank
        self.height=50*rank
        self.ranpoint=random.choice([
        (random.randrange(0, width -self.width), 
        random.choice([-1*self.height -5, height +5])), 
        (random.choice([-1*self.width -5, width +5]), 
        random.randrange(0, height -self.height))])
        self.x, self.y = self.ranpoint
        if self.x<width//2:
            self.sdir = 1
        else:
            self.xdir=-1
        if self.y<height//2:
            self.ydir = 1
        else:
            self.ydir=-1

        self.xv = self.xdir * random.randrange(1, 3)
        self.yv = self.ydir * random.randrange(1, 3)

    def draw(self, window):
        window.blit(self.image, (self.x, self.y))

class Star(object):
